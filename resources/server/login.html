<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>鸣潮插件登录 | Waves-Plugin</title><script src="https://static.geetest.com/v4/gt4.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js"></script><style>@import url(https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap);*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}body{display:flex;justify-content:center;align-items:center;min-height:100vh;flex-direction:column;background:#23242a}.box{position:relative;width:448px;height:auto;border-radius:8px;overflow:hidden}#box_head{width:368px;padding:66px 0 40px;border-top-left-radius:12px;border-top-right-radius:12px}form{background:#fff;border-radius:8px;display:flex;flex-direction:column;align-items:center}.inputBox{position:relative;width:368px;height:56px;border-radius:8px;overflow:hidden;margin-bottom:16px;color:#aeb6c2}.inputBox button{background:0 0;box-shadow:none;border:none;letter-spacing:.05em}span{margin-bottom:16px;font-size:.75em;color:#8f8f8f;text-decoration:beige}#btn-submit{border:none;outline:0;padding:11px 25px;background:#00d2d6;color:#fff;cursor:pointer;border-radius:4px;font-size:20px;line-height:32px;font-weight:700;width:368px;user-select:none;margin-bottom:16px}#btn-submit:active{opacity:.8}#btn-verifycode{position:absolute;right:0;outline:0;cursor:pointer;width:142px;height:40px;padding:1px 6px;margin:7.5px;color:#aeb6c2;background:#fff;border-radius:6px;font-size:15px;line-height:32px;font-weight:400}.inputBox input{position:relative;padding:11px 24px;width:368px;outline:0;box-shadow:none;border:none;letter-spacing:.05em;transition:.5s;background-color:#f3f6f8;font-size:18px;line-height:32px;font-weight:400;color:#393f4d}.inputBox input::placeholder{color:#aeb6c2}#aggrement{position:relative;width:368px;align-items:center;display:flex;flex-direction:row;font-size:16px;line-height:32px;min-width:0;margin-bottom:32px}.checkbox{width:26px}#reminder{margin-left:10px;width:100%;color:#8c95a3;font-size:12px;user-select:none}#reminder>a{color:#00d2d6;font-size:12px;padding:0 2px;text-decoration:none}.info-popup{display:none;position:fixed;top:20px;left:50%;transform:translateX(-50%);background-color:red;color:#fff;padding:10px;box-shadow:0 2px 4px rgba(0,0,0,.2);z-index:1000;border-radius:5px}</style></head><body><div id="info-popup" class="info-popup"></div><div class="box"><form autocomplete="off"><img src="https://cdn.jsdelivr.net/gh/erzaozi/waves-plugin@main/resources/server/top-logo.png" id="box_head"><div class="inputBox"><input type="text" required="required" name="phoneNumber" maxlength="11" placeholder="请输入手机号码"></div><div class="inputBox"><input type="text" required="required" name="verifyCode" maxlength="6" placeholder="验证码"> <button type="button" id="btn-verifycode" disabled="true">获取验证码</button></div><span>当前识别码为：<span id="user-id"></span></span> <button type="button" id="btn-submit">登录</button><div id="aggrement"><svg id="unchecked" width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg" class="checkbox"><rect opacity="0.5" x="3" y="3" width="24" height="24" rx="3" stroke="#AEB6C2" stroke-width="2"></rect></svg> <svg id="checked" style="display:none" width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg" class="checkbox"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 4H24C25.1046 4 26 4.89543 26 6V24C26 25.1046 25.1046 26 24 26H6C4.89543 26 4 25.1046 4 24V6C4 4.89543 4.89543 4 6 4ZM2 6C2 3.79086 3.79086 2 6 2H24C26.2091 2 28 3.79086 28 6V24C28 26.2091 26.2091 28 24 28H6C3.79086 28 2 26.2091 2 24V6ZM8 6C6.89543 6 6 6.89543 6 8V22C6 23.1046 6.89543 24 8 24H22C23.1046 24 24 23.1046 24 22V8C24 6.89543 23.1046 6 22 6H8Z" fill="#00D2D6"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M9.6967 13.409L8.10571 15L13.409 20.3033L15 18.7123L15 18.7123L21.8946 11.8176L20.3036 10.2266L13.409 17.1213L9.6967 13.409Z" fill="white"></path></svg><div id="reminder">我已阅读并同意<a href="https://github.com/erzaozi/waves-plugin/wiki/%E7%94%A8%E6%88%B7%E5%8D%8F%E8%AE%AE" target="_blank">《用户协议》</a></div></div></form></div><script>let captchaIns = null, isChecked = new Proxy({ value: !1 }, { set(e, o, n) { return e[o] = n, "value" === o && (!0 === n ? ($("#unchecked").hide(), $("#checked").show()) : !1 === n && ($("#checked").hide(), $("#unchecked").show())), !0 } }); function popInfo(e, o) { const n = $("#info-popup"); switch (e) { case "error": n.css("background-color", "red"); break; case "warn": n.css("background-color", "yellow"); break; default: n.css("background-color", "green") }n.text(o), n.fadeIn(), setTimeout(function () { n.fadeOut() }, 3e3) } initGeetest4({ captchaId: "ec4aa4174277d822d73f2442a165a2cd", product: "bind" }, function (t) { (captchaIns = t).onReady(function () { }).onSuccess(function () { let e = 59, o = ($("#btn-verifycode").prop("disabled", !0), $("#btn-verifycode").css("color", "#aeb6c2"), setInterval(() => { console.log(e), $("#btn-verifycode").text(`获取验证码(${e})`), e-- }, 1e3)); setTimeout(() => { clearInterval(o), $("#btn-verifycode").text("获取验证码"), $("#btn-verifycode").css("color", "#00D2D6"), $("#btn-verifycode").prop("disabled", !1) }, 6e4); var n = t.getValidate(); n || popInfo("warn", "请先完成验证"), fetch(`https://api.kurobbs.com/user/getSmsCodeForH5?mobile=${$('input[name="phoneNumber"]').val()}&geeTestData=` + encodeURI(JSON.stringify(n)), { method: "POST", headers: { source: "h5" } }).then(e => e.json()).then(e => { if (200 === e.code) popInfo("success", "短信已发送，请注意接收"); else { if (!e.code || !e.msg) throw new Error(e.msg); popInfo("error", e.msg) } }).catch(e => { popInfo("error", "请求短信验证码出错，" + String(e.message)) }) }).onError(function () { popInfo("error", "验证出错，请重试") }) }), $(document).ready(() => { var e = new XMLHttpRequest, e = (e.open("GET", document.location.href, !1), e.send(null), e.getAllResponseHeaders()); $("#user-id").html(e.match(/userid:\s*(.*)\r\n/)[1]), $('input[name="phoneNumber"]').on("input", function () { $(this).val($(this).val().replace(/[^\d]/g, "")), console.log($(this).val().length), 11 === $(this).val().length ? ($("#btn-verifycode").prop("disabled", !1), $("#btn-verifycode").css("color", "#00D2D6")) : ($("#btn-verifycode").prop("disabled", !0), $("#btn-verifycode").css("color", "#aeb6c2")) }), $('input[name="verifyCode"]').on("input", function () { $(this).val($(this).val().replace(/[^\d]/g, "")) }), $("#btn-verifycode").on("click", function () { 11 === $('input[name="phoneNumber"]').val().length && $('input[name="phoneNumber"]').val().startsWith("1") ? fetch(`https://api.kurobbs.com/user/getSmsCodeForH5?mobile=${$('input[name="phoneNumber"]').val()}&geeTestData=`, { method: "POST" }).then(e => e.json()).then(e => { if (200 !== e.code) throw new Error(e.msg); captchaIns.showBox() }).catch(e => { popInfo("error", "请求短信验证码出错，" + String(e.message)) }) : popInfo("error", "请输入正确的手机号") }), $("#btn-submit").on("click", function () { 11 !== $('input[name="phoneNumber"]').val().length ? popInfo("error", "请输入正确的手机号") : 6 !== $('input[name="verifyCode"]').val().length ? popInfo("error", "请输入正确的验证码") : isChecked.value ? fetch(window.location.href.replace("login", "code").replace(".html", ""), { method: "POST", headers: { Accept: "application/json, text/plain, */*", "Content-Type": "application/json" }, body: JSON.stringify({ mobile: $('input[name="phoneNumber"]').val(), code: $('input[name="verifyCode"]').val() }) }).then(e => e.json()).then(e => { if (200 !== e.code) throw 400 === e.code ? new Error(e.msg) : new Error("未知错误"); popInfo("success", "登录成功") }).catch(e => { popInfo("error", "登录失败，" + e.message) }) : popInfo("error", "请先阅读并同意勾选同意用户协议") }), $(".checkbox").on("click", function () { isChecked.value = !isChecked.value }) });</script></body></html>